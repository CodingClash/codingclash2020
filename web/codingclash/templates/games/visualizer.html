{% extends base_template_name %}
{% load static %}
{% block title %}CodingClash: Visualizer{% endblock %}
{% block head %}
    <script>const replayData = "";</script>
    {% if replay %}
        <script>const replayData = {{ replay }}</script>
    {% endif %}
    <link rel="stylesheet" href="{% static 'css/visualizer.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" >
    <script src="{% static 'js/visualizer.js' %}" type="text/javascript"></script>
    <script src="{% static 'vendor/jquery/jquery.min.js' %}"type="text/javascript"></script>
    <script src="{% static 'vendor/jquery/jquery-ui.js' %}"type="text/javascript"></script>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
{% endblock %}

{% block main %}
    <div id="root" style="display: flex">
        <div id="gameBoard" style="float: left; width: 610px; min-width: 610px; margin-right: 20px; display: block; font-size: 0;">
        </div>
        <div id="stats" style="flex-grow: 100; padding: 5px; display: block;">
            <label class="btn-secondary btn-sm btn-block">
                Upload Replay File:
                <input type="file" id="myFile" name="filename" class="ml-3" accept="text/plain" onchange="uploadReplay();">
            </label>
            <div class="btn-toolbar mb-3" role="toolbar">
                <button class="btn btn-primary mr-2" onclick="updateBoardNum(board_num - 1);">Prev</button>
                <button class="btn btn-primary" onclick="updateBoardNum(board_num + 1);">Next</button>
            </div>
            <div class="btn-toolbar mb-3" role="toolbar">
                <button class="btn btn-primary mr-2" id="play" onclick="togglePlay();">Play</button>
                <label class="btn mb-1">Speed: <span id="speedNum" class="ml-2 mr-3"></span></label>
                <input type="range" class="slider" style="height: 10px; flex-grow: 100;" id="speedRange" value="1" min="1" max="20" oninput="updateSpeed(this.value);">
            </div>
            <div class="input-group">
                <label class="btn btn-block mb-1" for="roundRange">Round #: <span id="roundNum"></span></label>
                <input type="range" class="custom-range" id="roundRange" min="0" max="0" oninput="updateBoardNum(this.value);">
            </div>
            <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'Stats')">Stats</button>
                <button class="tablinks" onclick="openTab(event, 'Blockchain')">Blockchain</button>
                <button class="tablinks" onclick="openTab(event, 'Debug')">Debug</button>
                <button class="tablinks" onclick="openTab(event, 'RobotData')">Robot Data</button>
            </div>

            <div id="Stats" class="tabcontent">
                <p style="color:powderblue;">Blue Tanks: <span id="numBlueTanks"></span></p>
                <p style="color:powderblue;">Blue Gunners: <span id="numBlueGunners"></span></p>
                <p style="color:lightcoral;">Red Tanks: <span id="numRedTanks"></span></p>
                <p style="color:lightcoral;">Red Gunners: <span id="numRedGunners"></span></p>
            </div>
            
            <div id="Blockchain" class="tabcontent">
            <p><span id="bchain"></span></p>
            </div>
            
            <div id="Debug" class="tabcontent">
            <p><span id="dlogs"></span></p>
            </div>

            <div id="RobotData" class="tabcontent">
            <p><span id="robotinfo"></span></p>
            </div>
        </div>
    </div>


{% endblock %}
